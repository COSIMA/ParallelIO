<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIO: Reading a Variable into Distributes Arrays</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIO
   &#160;<span id="projectnumber">2.4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Reading a Variable into Distributes Arrays</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa4eb9375a17ec358a88c8e7e388880db"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o__read__darray__c.html#gaa4eb9375a17ec358a88c8e7e388880db">PIOc_read_darray</a> (int ncid, int varid, int ioid, <a class="el" href="pio_8h.html#a1225edb54e6d6de678bf675485549eb0">PIO_Offset</a> arraylen, void *array)</td></tr>
<tr class="memdesc:gaa4eb9375a17ec358a88c8e7e388880db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a field from a file to the IO library.  <a href="#gaa4eb9375a17ec358a88c8e7e388880db">More...</a><br /></td></tr>
<tr class="separator:gaa4eb9375a17ec358a88c8e7e388880db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb5eaab10ffe27b8d36479531b323df4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o__read__darray__c.html#gacb5eaab10ffe27b8d36479531b323df4">find_all_start_count</a> (<a class="el" href="structio__region.html">io_region</a> *region, int maxregions, int fndims, int iodesc_ndims, <a class="el" href="structvar__desc__t.html">var_desc_t</a> *vdesc, size_t *tmp_start, size_t *tmp_count)</td></tr>
<tr class="memdesc:gacb5eaab10ffe27b8d36479531b323df4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill the tmp_start and tmp_count arrays, which contain the start and count arrays for all regions.  <a href="#gacb5eaab10ffe27b8d36479531b323df4">More...</a><br /></td></tr>
<tr class="separator:gacb5eaab10ffe27b8d36479531b323df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0191092b2a65ce808aaa386c984da160"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o__read__darray__c.html#ga0191092b2a65ce808aaa386c984da160">pio_read_darray_nc</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, <a class="el" href="structio__desc__t.html">io_desc_t</a> *iodesc, int vid, void *iobuf)</td></tr>
<tr class="memdesc:ga0191092b2a65ce808aaa386c984da160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an array of data from a file to the (parallel) IO library.  <a href="#ga0191092b2a65ce808aaa386c984da160">More...</a><br /></td></tr>
<tr class="separator:ga0191092b2a65ce808aaa386c984da160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d440f0ff9f9fe7329901604e99138b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o__read__darray__c.html#ga2d440f0ff9f9fe7329901604e99138b3">pio_read_darray_nc_serial</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, <a class="el" href="structio__desc__t.html">io_desc_t</a> *iodesc, int vid, void *iobuf)</td></tr>
<tr class="memdesc:ga2d440f0ff9f9fe7329901604e99138b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an array of data from a file to the (serial) IO library.  <a href="#ga2d440f0ff9f9fe7329901604e99138b3">More...</a><br /></td></tr>
<tr class="separator:ga2d440f0ff9f9fe7329901604e99138b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacb5eaab10ffe27b8d36479531b323df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb5eaab10ffe27b8d36479531b323df4">&#9670;&nbsp;</a></span>find_all_start_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_all_start_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__region.html">io_region</a> *&#160;</td>
          <td class="paramname"><em>region</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxregions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fndims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iodesc_ndims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvar__desc__t.html">var_desc_t</a> *&#160;</td>
          <td class="paramname"><em>vdesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>tmp_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>tmp_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill the tmp_start and tmp_count arrays, which contain the start and count arrays for all regions. </p>
<p>This is an internal function which is only called on io tasks. It is called by <a class="el" href="group___p_i_o__write__darray__c.html#ga41c45f0b205bcef5184404ac50567feb" title="Write a set of one or more aggregated arrays to output file in serial mode. ">write_darray_multi_serial()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">region</td><td>pointer to the first in a linked list of regions. </td></tr>
    <tr><td class="paramname">maxregions</td><td>the number of regions in the list. </td></tr>
    <tr><td class="paramname">fndims</td><td>the number of dimensions in the file. </td></tr>
    <tr><td class="paramname">iodesc_ndims</td><td>the number of dimensions in the decomposition. </td></tr>
    <tr><td class="paramname">vdesc</td><td>pointer to an array of <a class="el" href="structvar__desc__t.html" title="Variable description structure. ">var_desc_t</a> for the vars being written. </td></tr>
    <tr><td class="paramname">tmp_start</td><td>pointer to an already allocaed array of length fndims * maxregions. This array will get the start values for all regions. </td></tr>
    <tr><td class="paramname">tmp_count</td><td>pointer to an already allocaed array of length fndims * maxregions. This array will get the count values for all regions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
<a id="ga0191092b2a65ce808aaa386c984da160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0191092b2a65ce808aaa386c984da160">&#9670;&nbsp;</a></span>pio_read_darray_nc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_read_darray_nc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__desc__t.html">io_desc_t</a> *&#160;</td>
          <td class="paramname"><em>iodesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>iobuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an array of data from a file to the (parallel) IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">iodesc</td><td>a pointer to the defined iodescriptor for the buffer </td></tr>
    <tr><td class="paramname">vid</td><td>the variable id to be read </td></tr>
    <tr><td class="paramname">iobuf</td><td>the buffer to be read into from this mpi task. May be null. for example we have 8 ionodes and a distributed array with global size 4, then at least 4 nodes will have a null iobuf. In practice the box rearranger trys to have at least blocksize bytes on each io task and so if the total number of bytes to write is less than blocksize*numiotasks then some iotasks will have a NULL iobuf. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
<a id="ga2d440f0ff9f9fe7329901604e99138b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d440f0ff9f9fe7329901604e99138b3">&#9670;&nbsp;</a></span>pio_read_darray_nc_serial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_read_darray_nc_serial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__desc__t.html">io_desc_t</a> *&#160;</td>
          <td class="paramname"><em>iodesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>iobuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an array of data from a file to the (serial) IO library. </p>
<p>This function is only used with netCDF classic and netCDF-4 serial iotypes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">iodesc</td><td>a pointer to the defined iodescriptor for the buffer </td></tr>
    <tr><td class="paramname">vid</td><td>the variable id to be read. </td></tr>
    <tr><td class="paramname">iobuf</td><td>the buffer to be written from this mpi task. May be null. for example we have 8 ionodes and a distributed array with global size 4, then at least 4 nodes will have a null iobuf. In practice the box rearranger trys to have at least blocksize bytes on each io task and so if the total number of bytes to write is less than blocksize * numiotasks then some iotasks will have a NULL iobuf. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
<a id="gaa4eb9375a17ec358a88c8e7e388880db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4eb9375a17ec358a88c8e7e388880db">&#9670;&nbsp;</a></span>PIOc_read_darray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_read_darray </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>varid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pio_8h.html#a1225edb54e6d6de678bf675485549eb0">PIO_Offset</a>&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a field from a file to the IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file </td></tr>
    <tr><td class="paramname">varid</td><td>the variable ID to be read </td></tr>
    <tr><td class="paramname">ioid</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp__c.html#ga56c119d47d1082df044968f80acbe265" title="Initialize the decomposition used with distributed arrays. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen</td><td>the length of the array to be read. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array</td><td>pointer to the data to be read. This is a pointer to the distributed portion of the array that is on this processor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 25 2019 08:15:39 for PIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
