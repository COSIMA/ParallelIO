<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>PIO: pio_darray.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIO
   &#160;<span id="projectnumber">..</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>PIO&#160;User's&#160;Guide</span></a></li>
      <li><a href="annotated.html"><span>Appendix</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_fbdd47254eba6596566cfbbd6768a55d.html">clib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pio_darray.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the routines that read and write distributed arrays in PIO.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;config.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="pio_8h_source.html">pio.h</a>&gt;</code><br/>
<code>#include &lt;pio_internal.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pio_darray.c:</div>
<div class="dyncontent">
<div class="center"><img src="pio__darray_8c__incl.png" border="0" usemap="#pio__darray_8c" alt=""/></div>
<map name="pio__darray_8c" id="pio__darray_8c">
<area shape="rect" id="node3" href="pio_8h.html" title="Public headers for the PIO C interface. " alt="" coords="191,80,241,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9734d15053b7d201e067f0f894bcee8a"><td class="memItemLeft" align="right" valign="top">PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a9734d15053b7d201e067f0f894bcee8a">PIOc_set_buffer_size_limit</a> (const PIO_Offset limit)</td></tr>
<tr class="memdesc:a9734d15053b7d201e067f0f894bcee8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the pio buffer size limit.  <a href="#a9734d15053b7d201e067f0f894bcee8a">More...</a><br/></td></tr>
<tr class="separator:a9734d15053b7d201e067f0f894bcee8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2231e6bc8e95b3b7ce073481e30eb57a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a2231e6bc8e95b3b7ce073481e30eb57a">compute_buffer_init</a> (<a class="el" href="structiosystem__desc__t.html">iosystem_desc_t</a> ios)</td></tr>
<tr class="memdesc:a2231e6bc8e95b3b7ce073481e30eb57a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the compute buffer to size PIO_CNBUFFER_LIMIT.  <a href="#a2231e6bc8e95b3b7ce073481e30eb57a">More...</a><br/></td></tr>
<tr class="separator:a2231e6bc8e95b3b7ce073481e30eb57a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb658657fdc5f52e1a2897b00c5ab50f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#abb658657fdc5f52e1a2897b00c5ab50f">pio_write_darray_nc</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, <a class="el" href="structio__desc__t.html">io_desc_t</a> *iodesc, const int vid, void *IOBUF, void *fillvalue)</td></tr>
<tr class="memdesc:abb658657fdc5f52e1a2897b00c5ab50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single distributed field to output.  <a href="#abb658657fdc5f52e1a2897b00c5ab50f">More...</a><br/></td></tr>
<tr class="separator:abb658657fdc5f52e1a2897b00c5ab50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6337cd0e57f0b8331e00afd3af259fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#ad6337cd0e57f0b8331e00afd3af259fc">pio_write_darray_multi_nc</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, const int nvars, const int *vid, const int iodesc_ndims, MPI_Datatype basetype, const PIO_Offset *gsize, const int maxregions, <a class="el" href="structio__region.html">io_region</a> *firstregion, const PIO_Offset llen, const int maxiobuflen, const int num_aiotasks, void *IOBUF, const int *frame)</td></tr>
<tr class="memdesc:ad6337cd0e57f0b8331e00afd3af259fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a set of one or more aggregated arrays to output file.  <a href="#ad6337cd0e57f0b8331e00afd3af259fc">More...</a><br/></td></tr>
<tr class="separator:ad6337cd0e57f0b8331e00afd3af259fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10f1f613dea0886926d6073f1841fcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#ab10f1f613dea0886926d6073f1841fcd">pio_write_darray_multi_nc_serial</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, const int nvars, const int *vid, const int iodesc_ndims, MPI_Datatype basetype, const PIO_Offset *gsize, const int maxregions, <a class="el" href="structio__region.html">io_region</a> *firstregion, const PIO_Offset llen, const int maxiobuflen, const int num_aiotasks, void *IOBUF, const int *frame)</td></tr>
<tr class="memdesc:ab10f1f613dea0886926d6073f1841fcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a set of one or more aggregated arrays to output file in serial mode.  <a href="#ab10f1f613dea0886926d6073f1841fcd">More...</a><br/></td></tr>
<tr class="separator:ab10f1f613dea0886926d6073f1841fcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef33b52a8d111b0c1b4c6f7fd541892e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#aef33b52a8d111b0c1b4c6f7fd541892e">PIOc_write_darray_multi</a> (const int ncid, const int *vid, const int ioid, const int nvars, const PIO_Offset arraylen, void *array, const int *frame, void **fillvalue, bool flushtodisk)</td></tr>
<tr class="memdesc:aef33b52a8d111b0c1b4c6f7fd541892e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one or more arrays with the same IO decomposition to the file.  <a href="#aef33b52a8d111b0c1b4c6f7fd541892e">More...</a><br/></td></tr>
<tr class="separator:aef33b52a8d111b0c1b4c6f7fd541892e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10d75600089dde28d264a1215afa2e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#aa10d75600089dde28d264a1215afa2e9">PIOc_write_darray</a> (const int ncid, const int vid, const int ioid, const PIO_Offset arraylen, void *array, void *fillvalue)</td></tr>
<tr class="memdesc:aa10d75600089dde28d264a1215afa2e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a distributed array to the output file.  <a href="#aa10d75600089dde28d264a1215afa2e9">More...</a><br/></td></tr>
<tr class="separator:aa10d75600089dde28d264a1215afa2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86dd21a39e72785837ee95e32947cce7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a86dd21a39e72785837ee95e32947cce7">pio_read_darray_nc</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, <a class="el" href="structio__desc__t.html">io_desc_t</a> *iodesc, const int vid, void *IOBUF)</td></tr>
<tr class="memdesc:a86dd21a39e72785837ee95e32947cce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an array of data from a file to the (parallel) IO library.  <a href="#a86dd21a39e72785837ee95e32947cce7">More...</a><br/></td></tr>
<tr class="separator:a86dd21a39e72785837ee95e32947cce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091abf4e9ffb507ce0c1320ed4a5178b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a091abf4e9ffb507ce0c1320ed4a5178b">pio_read_darray_nc_serial</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, <a class="el" href="structio__desc__t.html">io_desc_t</a> *iodesc, const int vid, void *IOBUF)</td></tr>
<tr class="memdesc:a091abf4e9ffb507ce0c1320ed4a5178b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an array of data from a file to the (serial) IO library.  <a href="#a091abf4e9ffb507ce0c1320ed4a5178b">More...</a><br/></td></tr>
<tr class="separator:a091abf4e9ffb507ce0c1320ed4a5178b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad84360062331f220beb6ebf26557678e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#ad84360062331f220beb6ebf26557678e">PIOc_read_darray</a> (const int ncid, const int vid, const int ioid, const PIO_Offset arraylen, void *array)</td></tr>
<tr class="memdesc:ad84360062331f220beb6ebf26557678e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a field from a file to the IO library.  <a href="#ad84360062331f220beb6ebf26557678e">More...</a><br/></td></tr>
<tr class="separator:ad84360062331f220beb6ebf26557678e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aae883a7c03603670359ae53b4ef40673"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae883a7c03603670359ae53b4ef40673"></a>
PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><b>PIO_BUFFER_SIZE_LIMIT</b> = 10485760</td></tr>
<tr class="separator:aae883a7c03603670359ae53b4ef40673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5008ff3c0bd7e34e969fd583facfb6fd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5008ff3c0bd7e34e969fd583facfb6fd"></a>
bufsize&#160;</td><td class="memItemRight" valign="bottom"><b>PIO_CNBUFFER_LIMIT</b> = 33554432</td></tr>
<tr class="separator:a5008ff3c0bd7e34e969fd583facfb6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the routines that read and write distributed arrays in PIO. </p>
<p>When arrays are distributed, each processor holds some of the array. Only by combining the distributed arrays from all processor can the full array be obtained.</p>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2231e6bc8e95b3b7ce073481e30eb57a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_buffer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiosystem__desc__t.html">iosystem_desc_t</a>&#160;</td>
          <td class="paramname"><em>ios</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the compute buffer to size PIO_CNBUFFER_LIMIT. </p>
<p>This routine initializes the compute buffer pool if the bget memory management is used. If malloc is used (that is, PIO_USE_MALLOC is non zero), this function does nothing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ios</td><td>the iosystem descriptor which will use the new buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a86dd21a39e72785837ee95e32947cce7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_read_darray_nc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__desc__t.html">io_desc_t</a> *&#160;</td>
          <td class="paramname"><em>iodesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>IOBUF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an array of data from a file to the (parallel) IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">iodesc</td><td>a pointer to the defined iodescriptor for the buffer </td></tr>
    <tr><td class="paramname">vid</td><td>the variable id to be read </td></tr>
    <tr><td class="paramname">IOBUF</td><td>the buffer to be read into from this mpi task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a091abf4e9ffb507ce0c1320ed4a5178b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_read_darray_nc_serial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__desc__t.html">io_desc_t</a> *&#160;</td>
          <td class="paramname"><em>iodesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>IOBUF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an array of data from a file to the (serial) IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">iodesc</td><td>a pointer to the defined iodescriptor for the buffer </td></tr>
    <tr><td class="paramname">vid</td><td>the variable id to be read. </td></tr>
    <tr><td class="paramname">IOBUF</td><td>the buffer to be read into from this mpi task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="ad6337cd0e57f0b8331e00afd3af259fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_write_darray_multi_nc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nvars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iodesc_ndims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Datatype&#160;</td>
          <td class="paramname"><em>basetype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset *&#160;</td>
          <td class="paramname"><em>gsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxregions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__region.html">io_region</a> *&#160;</td>
          <td class="paramname"><em>firstregion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>llen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxiobuflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>num_aiotasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>IOBUF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a set of one or more aggregated arrays to output file. </p>
<p>This routine is used if aggregation is enabled, data is already on the io-tasks</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">nvars</td><td>the number of variables to be written with this decomposition </td></tr>
    <tr><td class="paramname">vid,:</td><td>an array of the variable ids to be written </td></tr>
    <tr><td class="paramname">iodesc_ndims,:</td><td>the number of dimensions explicitly in the iodesc </td></tr>
    <tr><td class="paramname">basetype</td><td>the basic type of the minimal data unit </td></tr>
    <tr><td class="paramname">gsize</td><td>array of the global dimensions of the field to be written </td></tr>
    <tr><td class="paramname">maxregions</td><td>max number of blocks to be written from this iotask </td></tr>
    <tr><td class="paramname">firstregion</td><td>pointer to the first element of a linked list of region descriptions. </td></tr>
    <tr><td class="paramname">llen</td><td>length of the iobuffer on this task for a single field </td></tr>
    <tr><td class="paramname">maxiobuflen</td><td>maximum llen participating </td></tr>
    <tr><td class="paramname">num_aiotasks</td><td>actual number of iotasks participating </td></tr>
    <tr><td class="paramname">IOBUF</td><td>the buffer to be written from this mpi task </td></tr>
    <tr><td class="paramname">frame</td><td>the frame or record dimension for each of the nvars variables in IOBUF</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ab10f1f613dea0886926d6073f1841fcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_write_darray_multi_nc_serial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nvars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iodesc_ndims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Datatype&#160;</td>
          <td class="paramname"><em>basetype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset *&#160;</td>
          <td class="paramname"><em>gsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxregions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__region.html">io_region</a> *&#160;</td>
          <td class="paramname"><em>firstregion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>llen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxiobuflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>num_aiotasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>IOBUF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a set of one or more aggregated arrays to output file in serial mode. </p>
<p>This routine is used if aggregation is enabled, data is already on the io-tasks</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file,:</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">nvars,:</td><td>the number of variables to be written with this decomposition </td></tr>
    <tr><td class="paramname">vid,:</td><td>an array of the variable ids to be written </td></tr>
    <tr><td class="paramname">iodesc_ndims,:</td><td>the number of dimensions explicitly in the iodesc </td></tr>
    <tr><td class="paramname">basetype</td><td>: the basic type of the minimal data unit </td></tr>
    <tr><td class="paramname">gsize</td><td>: array of the global dimensions of the field to be written </td></tr>
    <tr><td class="paramname">maxregions</td><td>: max number of blocks to be written from this iotask </td></tr>
    <tr><td class="paramname">firstregion</td><td>: pointer to the first element of a linked list of region descriptions. </td></tr>
    <tr><td class="paramname">llen</td><td>: length of the iobuffer on this task for a single field </td></tr>
    <tr><td class="paramname">maxiobuflen</td><td>: maximum llen participating </td></tr>
    <tr><td class="paramname">num_aiotasks</td><td>: actual number of iotasks participating </td></tr>
    <tr><td class="paramname">IOBUF,:</td><td>the buffer to be written from this mpi task </td></tr>
    <tr><td class="paramname">frame</td><td>: the frame or record dimension for each of the nvars variables in IOBUF</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="abb658657fdc5f52e1a2897b00c5ab50f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pio_write_darray_nc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__desc__t.html">io_desc_t</a> *&#160;</td>
          <td class="paramname"><em>iodesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>IOBUF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fillvalue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a single distributed field to output. </p>
<p>This routine is only used if aggregation is off.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>a pointer to the open file descriptor for the file that will be written to </td></tr>
    <tr><td class="paramname">iodesc</td><td>a pointer to the defined iodescriptor for the buffer </td></tr>
    <tr><td class="paramname">vid</td><td>the variable id to be written </td></tr>
    <tr><td class="paramname">IOBUF</td><td>the buffer to be written from this mpi task </td></tr>
    <tr><td class="paramname">fillvalue</td><td>the optional fillvalue to be used for missing data in this buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ad84360062331f220beb6ebf26557678e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_read_darray </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a field from a file to the IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file </td></tr>
    <tr><td class="paramname">vid</td><td>the variable ID to be read </td></tr>
    <tr><td class="paramname">ioid,:</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga3930b9b4f52c2e69cdb58634f17e58e7" title="C interface to the initdecomp. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen,:</td><td>the length of the array to be read. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array,:</td><td>pointer to the data to be read. This is a pointer to the distributed portion of the array that is on this processor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a9734d15053b7d201e067f0f894bcee8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIO_Offset PIOc_set_buffer_size_limit </td>
          <td>(</td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>limit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the pio buffer size limit. </p>
<p>This is the size of the data buffer on the IO nodes.</p>
<p>The pio_buffer_size_limit will only apply to files opened after the setting is changed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit</td><td>the size of the buffer on the IO nodes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous limit setting. </dd></dl>

</div>
</div>
<a class="anchor" id="aa10d75600089dde28d264a1215afa2e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_write_darray </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fillvalue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a distributed array to the output file. </p>
<p>This routine aggregates output on the compute nodes and only sends it to the IO nodes when the compute buffer is full or when a flush is triggered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid,:</td><td>the ncid of the open netCDF file. </td></tr>
    <tr><td class="paramname">vid,:</td><td>the variable ID returned by <a class="el" href="pio_8h.html#a70d1d5b2f5e828fed653ca87aacef16e" title="The PIO-C interface for the NetCDF function nc_def_var. ">PIOc_def_var()</a>. </td></tr>
    <tr><td class="paramname">ioid,:</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga3930b9b4f52c2e69cdb58634f17e58e7" title="C interface to the initdecomp. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen,:</td><td>the length of the array to be written. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array,:</td><td>pointer to the data to be written. This is a pointer to the distributed portion of the array that is on this processor. </td></tr>
    <tr><td class="paramname">fillvalue,:</td><td>pointer to the fill value to be used for missing data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, non-zero error code for failure. </dd></dl>

</div>
</div>
<a class="anchor" id="aef33b52a8d111b0c1b4c6f7fd541892e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_write_darray_multi </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nvars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>fillvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushtodisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one or more arrays with the same IO decomposition to the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file </td></tr>
    <tr><td class="paramname">vid,:</td><td>an array of the variable ids to be written </td></tr>
    <tr><td class="paramname">ioid,:</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga3930b9b4f52c2e69cdb58634f17e58e7" title="C interface to the initdecomp. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">nvars</td><td>the number of variables to be written with this decomposition </td></tr>
    <tr><td class="paramname">arraylen,:</td><td>the length of the array to be written. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array,:</td><td>pointer to the data to be written. This is a pointer to the distributed portion of the array that is on this processor. </td></tr>
    <tr><td class="paramname">frame</td><td>the frame or record dimension for each of the nvars variables in IOBUF </td></tr>
    <tr><td class="paramname">fillvalue,:</td><td>pointer to the fill value to be used for missing data. </td></tr>
    <tr><td class="paramname">flushtodisk</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 24 2016 15:17:16 for PIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
