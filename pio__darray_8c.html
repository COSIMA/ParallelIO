<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>PIO: pio_darray.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIO
   &#160;<span id="projectnumber">..</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>PIO&#160;User's&#160;Guide</span></a></li>
      <li><a href="annotated.html"><span>Appendix</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43d99ce78fde0129422a9159c5186d57.html">ParallelIO</a></li><li class="navelem"><a class="el" href="dir_141a8219d9000c6e4137175db07b6601.html">src</a></li><li class="navelem"><a class="el" href="dir_f00dc8b6574f3e86f0c5dc7c00a526e4.html">clib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pio_darray.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Public functions that read and write distributed arrays in PIO.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;config.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="pio_8h_source.html">pio.h</a>&gt;</code><br/>
<code>#include &lt;pio_internal.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pio_darray.c:</div>
<div class="dyncontent">
<div class="center"><img src="pio__darray_8c__incl.png" border="0" usemap="#pio__darray_8c" alt=""/></div>
<map name="pio__darray_8c" id="pio__darray_8c">
<area shape="rect" id="node3" href="pio_8h.html" title="Public headers for the PIO C interface. " alt="" coords="191,80,241,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9734d15053b7d201e067f0f894bcee8a"><td class="memItemLeft" align="right" valign="top">PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a9734d15053b7d201e067f0f894bcee8a">PIOc_set_buffer_size_limit</a> (const PIO_Offset limit)</td></tr>
<tr class="memdesc:a9734d15053b7d201e067f0f894bcee8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the PIO IO node data buffer size limit.  <a href="#a9734d15053b7d201e067f0f894bcee8a">More...</a><br/></td></tr>
<tr class="separator:a9734d15053b7d201e067f0f894bcee8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef33b52a8d111b0c1b4c6f7fd541892e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#aef33b52a8d111b0c1b4c6f7fd541892e">PIOc_write_darray_multi</a> (const int ncid, const int *vid, const int ioid, const int nvars, const PIO_Offset arraylen, void *array, const int *frame, void **fillvalue, bool flushtodisk)</td></tr>
<tr class="memdesc:aef33b52a8d111b0c1b4c6f7fd541892e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one or more arrays with the same IO decomposition to the file.  <a href="#aef33b52a8d111b0c1b4c6f7fd541892e">More...</a><br/></td></tr>
<tr class="separator:aef33b52a8d111b0c1b4c6f7fd541892e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10d75600089dde28d264a1215afa2e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#aa10d75600089dde28d264a1215afa2e9">PIOc_write_darray</a> (const int ncid, const int vid, const int ioid, const PIO_Offset arraylen, void *array, void *fillvalue)</td></tr>
<tr class="memdesc:aa10d75600089dde28d264a1215afa2e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a distributed array to the output file.  <a href="#aa10d75600089dde28d264a1215afa2e9">More...</a><br/></td></tr>
<tr class="separator:aa10d75600089dde28d264a1215afa2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad84360062331f220beb6ebf26557678e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#ad84360062331f220beb6ebf26557678e">PIOc_read_darray</a> (const int ncid, const int vid, const int ioid, const PIO_Offset arraylen, void *array)</td></tr>
<tr class="memdesc:ad84360062331f220beb6ebf26557678e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a field from a file to the IO library.  <a href="#ad84360062331f220beb6ebf26557678e">More...</a><br/></td></tr>
<tr class="separator:ad84360062331f220beb6ebf26557678e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aabf3f9fc5a764a9107ad492e1559cd77"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabf3f9fc5a764a9107ad492e1559cd77"></a>
PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><b>pio_buffer_size_limit</b> = 10485760</td></tr>
<tr class="separator:aabf3f9fc5a764a9107ad492e1559cd77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ea77d66c23466b306a6d74e751bd9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8ea77d66c23466b306a6d74e751bd9c"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>CN_bpool</b> = NULL</td></tr>
<tr class="separator:ad8ea77d66c23466b306a6d74e751bd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89343a92bde7994f33f1f466022fa0fc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89343a92bde7994f33f1f466022fa0fc"></a>
PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><b>maxusage</b> = 0</td></tr>
<tr class="separator:a89343a92bde7994f33f1f466022fa0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Public functions that read and write distributed arrays in PIO. </p>
<p>When arrays are distributed, each processor holds some of the array. Only by combining the distributed arrays from all processor can the full array be obtained.</p>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad84360062331f220beb6ebf26557678e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_read_darray </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a field from a file to the IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file </td></tr>
    <tr><td class="paramname">vid</td><td>the variable ID to be read </td></tr>
    <tr><td class="paramname">ioid,:</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga3930b9b4f52c2e69cdb58634f17e58e7" title="C interface to the initdecomp. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen,:</td><td>the length of the array to be read. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array,:</td><td>pointer to the data to be read. This is a pointer to the distributed portion of the array that is on this processor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a9734d15053b7d201e067f0f894bcee8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIO_Offset PIOc_set_buffer_size_limit </td>
          <td>(</td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>limit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the PIO IO node data buffer size limit. </p>
<p>The pio_buffer_size_limit will only apply to files opened after the setting is changed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit</td><td>the size of the buffer on the IO nodes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous limit setting. </dd></dl>

</div>
</div>
<a class="anchor" id="aa10d75600089dde28d264a1215afa2e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_write_darray </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fillvalue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a distributed array to the output file. </p>
<p>This routine aggregates output on the compute nodes and only sends it to the IO nodes when the compute buffer is full or when a flush is triggered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid,:</td><td>the ncid of the open netCDF file. </td></tr>
    <tr><td class="paramname">vid,:</td><td>the variable ID returned by <a class="el" href="group___p_i_o__def__var.html#ga70d1d5b2f5e828fed653ca87aacef16e" title="The PIO-C interface for the NetCDF function nc_def_var. ">PIOc_def_var()</a>. </td></tr>
    <tr><td class="paramname">ioid,:</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga3930b9b4f52c2e69cdb58634f17e58e7" title="C interface to the initdecomp. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen,:</td><td>the length of the array to be written. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array,:</td><td>pointer to the data to be written. This is a pointer to the distributed portion of the array that is on this processor. </td></tr>
    <tr><td class="paramname">fillvalue,:</td><td>pointer to the fill value to be used for missing data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, non-zero error code for failure. </dd></dl>

</div>
</div>
<a class="anchor" id="aef33b52a8d111b0c1b4c6f7fd541892e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_write_darray_multi </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nvars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>fillvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushtodisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one or more arrays with the same IO decomposition to the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file </td></tr>
    <tr><td class="paramname">vid,:</td><td>an array of the variable ids to be written </td></tr>
    <tr><td class="paramname">ioid,:</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga3930b9b4f52c2e69cdb58634f17e58e7" title="C interface to the initdecomp. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">nvars</td><td>the number of variables to be written with this decomposition </td></tr>
    <tr><td class="paramname">arraylen,:</td><td>the length of the array to be written. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array,:</td><td>pointer to the data to be written. This is a pointer to the distributed portion of the array that is on this processor. </td></tr>
    <tr><td class="paramname">frame</td><td>the frame or record dimension for each of the nvars variables in IOBUF </td></tr>
    <tr><td class="paramname">fillvalue,:</td><td>pointer to the fill value to be used for missing data. </td></tr>
    <tr><td class="paramname">flushtodisk</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 1 2016 14:15:33 for PIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
